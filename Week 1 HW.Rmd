---
title: 'Week 1: TE 1- 4 HW'
author: "Fatima Fairfax"
date: "1/5/2022"
output:
  html_document: default
  pdf_document: default
---

# Chapter 3 Question - Variables

1. What is a variable?

A variable is a collection of observations of the same measure. 

2. What type of variables are the following?

a.	Age -- continuous (though typically taken in count form)
b.	Gender -- categorical
c.	The number of times that the President has tweeted in the past day -- count
d.	Income -- continuous
e.	Number of Instagram posts about statistics in the past month -- count
f.	The number of unemployment claims filed in US last week -- count
g.	The university or college that a student attends -- categorical
h.	A therapist’s written assessment of a patient’s symptoms of depression -- qualitative
i.	Whether a soccer team is in its league’s A division (highest), B division (next highest), or C division (lowest) -- ordinal

3. Which of the following provides a description of the probability that each value of a variable will occur?

distribution

4. From the provided frequency table, provide the following:

```{r}
salary <- c(85000, 90000,100000,120000,125000,130000)
freq <- c(5,4,1,2,3,2)

tab_4 <- data.frame(salary,freq)

tab_4
```


a. Calculate the average salary earned by professors

```{r}
avg_sal <- sum((tab_4$salary)*(tab_4$freq)) / sum(tab_4$freq)

avg_sal
```

The average salary is $103,529

b. Calculate the median

This data set has 17 values. The Median is the 9th value. 

Median = $90,000

c. Calculate the minimum and maximum

This is just the lowest and highest value in the data set:

Minimum = $85,000
Maximum = $130,000

d. Calculate the interquartile range

The 25th quartile = $85,000
The 75th quartile = $125,000

IQR = 125,000 - 85,000 = $40,000.

50% of the employees closest the median have a range of average salaries of $40,000

I can do a long way check of all of this by converting the frequency table to one list frame and using the summary function:

```{r}
list_4 <- matrix(rep(tab_4$salary, times=tab_4$freq), ncol=1, byrow=TRUE)

summary(list_4)

```

This gives a median of $90,000, min = $85,00; max = $130,000 and interquartile range of $125,000 - $85,000 = $40,000.


5. Which of the following commonly represents the truth we are trying to estimate in statistics?

c. Greek letters like $\mu$ and $\beta$

6. Which of the following reduces impact of extreme values if the distribution of a variable is skewed?

a. Log transforming the variable

7. Order the following distribution from the one with lowest to the one with highest variability:

d < a < c < b


# Chapter 4 Question - Describing Relationships

## Coding Exercise

First, I load the packages associated with this textbook:

```{r}
install.packages('causaldata',repos="https://cran.us.r-project.org")
```

Using a dataset of women's labor force participation and earnings from 1975 I will:
a) load in the data
b) draw scatterplot between women's earnings and household earnings
c) get the conditional mean of women's earnings on if they attended college
d) get the conditional mean of women's earnings on bins of household earning
e) draw the LOESS and linear regression curves of the mean of log earnings conditional on log household earning
f) run a linear regression of log earnings on log household earning by itself and with controls


```{r}
#loading libraries

library(tidyverse)
install.packages('modelsummary',repos = "https://cran.us.r-project.org")
library(modelsummary)
```


```{r}
#getting relevant data from the full data set

df <- causaldata::Mroz |> 
  # keep just working women
  dplyr::filter(lfp == TRUE) |> 
  # get unlogged earnings
  mutate(earn = exp(lwg))

glimpse(df)
```

Looking up the Mroz data, some relevant variable terms are:

lfp = labor force participation 
k5  = number of children 5 years old or younger
wc = wife attended college
lwg = log expected wages
inc = family income exclusive of wife's income


```{r}
#Draw scatterplot
ggplot(df,aes(x = inc, y = earn)) +
  geom_point() +
  #use log scale for both axes
  scale_x_log10() + scale_y_log10() +
  labs(title = "Women's earnings by household income")
```

```{r}
#conditional mean by college attendance
df |> 
  group_by(wc) |> 
  summarize(earn = mean(earn))

mean(df$earn)
```

The conditional mean by college attendance is 5.35
The overall mean is 4.18

```{r}
#conditional mean by bins of household income
df |> 
  #use cut() to cut the variable into 10 bins
  mutate(inc_cut = cut(inc,10)) |> 
  group_by(inc_cut) |> 
  summarize(earn = mean(earn))
```

Not that the negative value exists because the household income is the family income exclusive of wife's income. So negative values indicate that the wife is the only or primary earner in the household.

```{r}
#draw the LOESS and linear regression curves
ggplot(df,aes(x=inc,y=earn)) +
  geom_point() +
  #geom_smooth auto makes the LOESS curve, but we don't want the se in the graph
  geom_smooth(se = FALSE) +
  scale_x_log10() + scale_y_log10() +
  labs(title = "LOESS curve of women's earning and family income")

ggplot(df,aes(x=inc,y=earn)) +
  geom_point() +
  geom_smooth(method = "lm",se=FALSE) +
  scale_x_log10() + scale_y_log10() +
  labs(title = "Linear regression of women's earning and family income")
```

These are very similar, but the linear regression is fitted to a straight line.

```{r}
#run a linear regression, by itself and including controls
model1 <- lm(lwg ~ log(inc),data = df)

model2 <- lm(lwg ~ log(inc) + wc + k5, data = df)

msummary(list(model1,model2))
```

Idk why the text is white...

But this shows that model 2 has a larger intercept value, *meaning that...*

*We can also do this in Bayesian notation using rstanarm...[do this last analysis that way]*


## Homework Questions

1. What is a conditional distribution?

2. Using the fictional data on the relationship between Depression and Income level:

a. How does the conditional mean of Depression change as Income increases?

The conditional mean of Depression decreases as Income increases.

b. Does the graph indicate that lower income causes depression?

No. The graph only shows a correlation between depression and income level. This graph does not represent a display of causality.

*3. Using the provided table from university students on their financial aid info:*

a.	Calculate the probability of receiving financial aid given that a student is a Senior.

b.	Calculate the probability that a student is a Senior given that they receive financial aid.

c.	Calculate the probability of receiving financial aid given that a student is a Freshman


*4. Describe two advantages and disadvantages of using line-fitting methods as opposed to calculating local means*

5. 
